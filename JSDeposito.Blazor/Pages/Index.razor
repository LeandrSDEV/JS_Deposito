@page "/"
@using JSDeposito.Application.DTOs
@inject HttpClient Http

<MudGrid>
    @if (produtos is null)
    {
        <MudProgressCircular Indeterminate />
    }
    else
    {
        @foreach (var p in produtos)
        {
            <MudItem xs="12" sm="6" md="4">
                <MudCard>
                    <MudCardContent>
                        <MudText Typo="Typo.h6">@p.Nome</MudText>
                        <MudText>R$ @p.Preco</MudText>
                    </MudCardContent>
                </MudCard>
            </MudItem>
        }
    }
</MudGrid>

@code {
    // 👇 Variável de estado do componente
    private List<ProdutoDto>? produtos;

    // 👇 Ciclo de vida do Blazor
    protected override async Task OnInitializedAsync()
    {
        produtos = await Http
            .GetFromJsonAsync<List<ProdutoDto>>("api/produtos");
    }
}
